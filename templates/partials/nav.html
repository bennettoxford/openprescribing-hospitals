<header class="relative bg-gradient-to-r from-oxford-200/20 via-bn-roman-200/35 to-bn-strawberry-200/25">
  <nav class="relative container flex flex-col max-[320px]:flex-col min-[321px]:flex-row justify-between items-center py-3 px-3 sm:px-4">
    <div class="relative z-30 flex flex-col max-[320px]:flex-col min-[321px]:flex-row items-center justify-between w-full">
      <p class="flex-shrink-0 flex items-center text-xl font-semibold tracking-tight leading-none text-stone-700">
        <a class="
          group relative p-2 -ml-2 bg-transparent rounded overflow-hidden focus:text-bn-strawberry-600 focus:outline-none focus:ring-2 focus:ring-oxford-500
          flex items-center
        " href="/">
          <span class="flex flex-col sm:flex-row items-start sm:items-center gap-y-1">
            <span class="flex flex-row items-center">
              <img src="/static/op-logo.svg" alt="" class="w-5 h-5" />
              <span class="text-oxford ml-1">
                OpenPrescribing 
                <span class="text-oxford-600">Hospitals</span>
              </span>
            </span>
            <span class="sm:ml-1 mt-1 sm:mt-0 text-sm font-semibold text-bn-strawberry-600 align-middle border border-bn-strawberry-600 rounded px-1 w-fit">BETA 2025</span>
          </span>
        </a>
      </p>
      
      {# Mobile nav #}
      <details-utils class="lg:hidden relative self-end min-[321px]:ml-auto flex items-center h-full" close-click-outside close-esc>
        <details class="group relative flex items-center">
          <summary
            class="
              list-none flex relative z-50 cursor-pointer border border-oxford/25 rounded p-2 transition-colors text-oxford duration-200
              hover:text-bn-strawberry-700 hover:border-bn-strawberry-500 hover:bg-bn-strawberry-50
              focus:text-bn-strawberry-700 focus:border-bn-strawberry-500 focus:bg-bn-strawberry-50 focus:outline-none focus:ring focus:ring-offset-2 focus:ring-offset-bn-strawberry-50 focus:ring-oxford-500
              [&::-webkit-details-marker]:hidden [&::marker]:hidden
              inline-flex w-auto group-open:invisible
            "
          >
            <span class="sr-only">Toggle menu</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 group-open:hidden">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hidden group-open:block">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </summary>
          <ul class="fixed lg:absolute z-40 top-0 lg:top-full left-0 lg:left-auto right-0 w-full lg:w-56 sm:lg:w-64 md:lg:w-72 flex flex-col shadow-xl pt-14 lg:pt-2 pb-4 lg:pb-2 px-4 bg-white text-base lg:text-sm font-semibold lg:mt-1 max-w-full lg:max-w-[calc(100vw-1rem)] lg:origin-top-right lg:rounded-b overflow-y-auto max-h-screen">
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:about' %}">
                About
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:alerts' %}">
                Email alerts
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:faq' %}">
                FAQ
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:analyse' %}">
                Analyse
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:measures_list' %}">
                Measures
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:submission_history' %}">
                <span class="whitespace-nowrap">Submission History</span>
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:product_lookup' %}">
                <span class="whitespace-nowrap">Product Lookup</span>
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:blog_list' %}">
                Blog
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:papers_list' %}">
                Research
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="https://openprescribing.net" 
               target="_blank" 
               rel="noopener noreferrer">
                OpenPrescribing
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:contact' %}">
                Contact
              </a>
            </li>
            
            {% if user.is_authenticated %}
              <li>
                <form method="post" action="{% url 'viewer:logout' %}">
                  {% csrf_token %}
                  <button type="submit" class="
                    relative inline-flex h-full items-center transition-colors duration-200 rounded px-2 py-2 -ml-2 w-full text-left
                    text-red-600
                    hover:text-red-700 hover:bg-red-50
                    focus:text-red-700 focus:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500
                  ">
                    Logout
                  </button>
                </form>
              </li>
            {% endif %}
            
            <li class="mt-4 border-t border-gray-100 pt-4">
              <button type="button" class="
                relative border border-oxford/25 rounded p-2 transition-colors text-oxford duration-200
                hover:text-bn-strawberry-700 hover:border-bn-strawberry-500 hover:bg-bn-strawberry-50
                focus:text-bn-strawberry-700 focus:border-bn-strawberry-500 focus:bg-bn-strawberry-50 focus:outline-none focus:ring focus:ring-offset-2 focus:ring-offset-bn-strawberry-50 focus:ring-oxford-500
                flex w-auto mx-auto
              " aria-label="Close menu" onclick="this.closest('details').querySelector('summary').click()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </li>
          </ul>
        </details>
      </details-utils>
    </div>

    {# Desktop nav #}
    <ul class="hidden relative flex-row gap-4 mx-1 text-sm font-semibold lg:flex lg:items-center">
      <li>
        <a class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        " href="{% url 'viewer:analyse' %}">
          Analyse
        </a>
      </li>
      <li>
        <a class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        " href="{% url 'viewer:measures_list' %}">
          Measures
        </a>
      </li>
      <li>
        <a class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        " href="{% url 'viewer:submission_history' %}">
          <span class="whitespace-nowrap">Submission History</span>
        </a>
      </li>
      <li>
        <a class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        " href="{% url 'viewer:blog_list' %}">
          Blog
        </a>
      </li>
      <li class="relative group">
        <button class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        ">
          More
          <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <div class="absolute right-0 top-full mt-1 py-2 w-48 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
          <a href="{% url 'viewer:about' %}" class="
            block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
            focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50
          ">
            About
          </a>
          <a href="{% url 'viewer:faq' %}" class="
            block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
            focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50
          ">
            FAQ
          </a>
          <a href="{% url 'viewer:product_lookup' %}" class="
            block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
            focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50
          ">
            Product Lookup
          </a>
          <a href="{% url 'viewer:papers_list' %}" class="
            block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
            focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50
          ">
            Research
          </a>
          <a href="{% url 'viewer:contact' %}" class="
            block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
            focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50
          ">
            Contact
          </a>
          <a href="https://openprescribing.net" 
             target="_blank" 
             rel="noopener noreferrer" 
             class="block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
                    focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50">
            OpenPrescribing
          </a>
          {% if user.is_authenticated %}
          <form method="post" action="{% url 'viewer:logout' %}" class="block">
            {% csrf_token %}
            <button type="submit" class="
              w-full text-left px-4 py-2 text-red-600
              hover:text-red-700 hover:bg-red-50
              focus:outline-none focus:text-red-700 focus:bg-red-50
            ">
              Logout
            </button>
          </form>
          {% endif %}
        </div>
      </li>
    </ul>
  </nav>
  <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-oxford-600/60 via-bn-roman-600/70 to-bn-strawberry-600/60"></div>
</header>
