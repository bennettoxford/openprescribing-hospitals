<header class="relative bg-gradient-to-r from-oxford-200/20 via-bn-roman-200/35 to-bn-strawberry-200/25">
  <nav class="relative container xl:max-w-screen-xl flex justify-between items-center flex-wrap py-3 gap-y-2">
    <p class="relative z-30 flex-shrink-0 flex items-center mr-4 text-xl font-semibold tracking-tight leading-none text-stone-700">
      <a class="
        group relative p-2 -ml-2 bg-transparent rounded overflow-hidden focus:text-bn-strawberry-600 focus:outline-none focus:ring-2 focus:ring-oxford-500
        flex items-center
      " href="/">
        <img src="/static/op-logo.svg" alt="" class="w-5 h-5" />
        <span class="flex items-center ml-1">
          <span class="text-oxford">
            OpenPrescribing 
            <span class="text-oxford-600">Hospitals</span>
            <span class="ml-1 text-sm font-semibold text-bn-strawberry-600 align-middle border border-bn-strawberry-600 rounded px-1">BETA</span>
          </span>
        </span>
      </a>
    </p>

    {# Mobile nav #}
    <details-utils class="md:hidden" close-click-outside close-esc>
      <details class="group">
        <summary
          class="
            list-none flex relative z-30 cursor-pointer border border-oxford/25 rounded p-1 ml-auto transition-colors text-oxford duration-200
            hover:text-bn-strawberry-700 hover:border-bn-strawberry-500 hover:bg-bn-strawberry-50
            focus:text-bn-strawberry-700 focus:border-bn-strawberry-500 focus:bg-bn-strawberry-50 focus:outline-none focus:ring focus:ring-offset-2 focus:ring-offset-bn-strawberry-50 focus:ring-oxford-500
          "
        >
          <span class="sr-only">Toggle menu</span>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 group-open:hidden">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hidden group-open:block">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </summary>
        <ul class="absolute z-20 top-1 w-full left-0 flex flex-col rounded shadow-xl pt-14 pb-2 px-4 bg-white text-sm font-semibold">
          <li>
            <a class="
              relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
              hover:text-bn-strawberry-700
              focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
            " href="{% url 'viewer:about' %}">
              About
            </a>
          </li>
          <li>
            <a class="
              relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
              hover:text-bn-strawberry-700
              focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
            " href="{% url 'viewer:faq' %}">
              FAQ
            </a>
          </li>
          {% if user.is_authenticated %}
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:analyse' %}">
                Analyse
              </a>
            </li>
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:measures_list' %}">
                Measures
              </a>
            </li>
          {% endif %}
          <li>
            <a class="
              relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
              hover:text-bn-strawberry-700
              focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
            " href="{% url 'viewer:submission_history' %}">
              Submission History
            </a>
          </li>
          <li>
            <a class="relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
              hover:text-bn-strawberry-700
              focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500" 
              href="https://openprescribing.net">
              OpenPrescribing
            </a>
          </li>
          <li>
            <a class="
              relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
              hover:text-bn-strawberry-700
              focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
            " href="{% url 'viewer:contact' %}">
              Contact
            </a>
          </li>
          
          {% if user.is_authenticated %}
            <li>
              <form method="post" action="{% url 'viewer:logout' %}">
                {% csrf_token %}
                <button type="submit" class="
                  relative inline-flex h-full items-center transition-colors duration-200 rounded px-2 py-2 -ml-2 w-full text-left
                  text-red-600
                  hover:text-red-700 hover:bg-red-50
                  focus:text-red-700 focus:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500
                ">
                  Logout
                </button>
              </form>
            </li>
          {% else %}
            <li>
              <a class="
                relative inline-flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-2 -ml-2
                hover:text-bn-strawberry-700
                focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
              " href="{% url 'viewer:login' %}">
                Login
              </a>
            </li>
          {% endif %}
        </ul>
      </details>
    </details-utils>

    {# Desktop nav #}
    <ul class="hidden relative flex-row gap-4 mx-1 text-sm font-semibold md:flex">
      <li>
        <a class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        " href="{% url 'viewer:about' %}">
          About
        </a>
      </li>
      <li>
        <a class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        " href="{% url 'viewer:faq' %}">
          FAQ
        </a>
      </li>
      {% if user.is_authenticated %}
        <li>
          <a class="
            relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
            hover:text-bn-strawberry-700
            focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
            before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
            before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
          " href="{% url 'viewer:analyse' %}">
            Analyse
          </a>
        </li>
        <li>
          <a class="
            relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
            hover:text-bn-strawberry-700
            focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
            before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
            before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
          " href="{% url 'viewer:measures_list' %}">
            Measures
          </a>
        </li>
      {% endif %}
      <li>
        <a class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        " href="{% url 'viewer:submission_history' %}">
          Submission History
        </a>
      </li>
      <li class="relative group">
        <button class="
          relative flex h-full items-center text-oxford transition-colors duration-200 rounded px-2 py-0
          hover:text-bn-strawberry-700
          focus:text-bn-strawberry-700 focus:outline-none focus:ring-2 focus:ring-oxford-500
          before:inline before:absolute before:-top-5 before:h-1 before:left-1/2 before:-translate-x-1 before:bg-bn-strawberry-300 before:w-1 before:transition-all before:opacity-0
          before:hover:w-full before:hover:opacity-100 before:hover:left-0 before:hover:translate-x-0
        ">
          More
          <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        
        <div class="absolute right-0 top-full mt-1 py-2 w-48 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
          <a href="{% url 'viewer:contact' %}" class="
            block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
            focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50
          ">
            Contact
          </a>
          <a href="https://openprescribing.net" 
             target="_blank" 
             rel="noopener noreferrer" 
             class="block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
                    focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50">
            OpenPrescribing
          </a>
          {% if user.is_authenticated %}
          <form method="post" action="{% url 'viewer:logout' %}" class="block">
            {% csrf_token %}
            <button type="submit" class="
              w-full text-left px-4 py-2 text-red-600
              hover:text-red-700 hover:bg-red-50
              focus:outline-none focus:text-red-700 focus:bg-red-50
            ">
              Logout
            </button>
          </form>
          {% else %}
          <a href="{% url 'viewer:login' %}" class="block px-4 py-2 text-oxford hover:text-bn-strawberry-700 hover:bg-slate-50
            focus:outline-none focus:text-bn-strawberry-700 focus:bg-slate-50">
            Login
          </a>
          {% endif %}
        </div>
      </li>
    </ul>
  </nav>
  <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-oxford-600/60 via-bn-roman-600/70 to-bn-strawberry-600/60"></div>
</header>
