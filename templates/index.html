{% extends "base.html" %}
{% load static %}

{% block title %}Home{% endblock %}
{% block full_width_content %}
<div class="isolate sm:bg-bn-blush-50 relative overflow-hidden">
    <div class="hidden sm:block absolute inset-x-0 -z-10 overflow-hidden opacity-25">
        <svg class="relative -z-10 max-w-none -top-1/2" viewBox="0 0 1155 678">
            <path fill="url(#45de2b6b-92d5-4d68-a6a0-9b9b2abad533)" d="M317.219 518.975L203.852 678 0 438.341l317.219 80.634 204.172-286.402c1.307 132.337 45.083 346.658 209.733 145.248C936.936 126.058 882.053-94.234 1031.02 41.331c119.18 108.451 130.68 295.337 121.53 375.223L855 299l21.173 362.054-558.954-142.079z" />
            <defs>
                <linearGradient id="45de2b6b-92d5-4d68-a6a0-9b9b2abad533" x1="1155.49" x2="-78.208" y1=".177" y2="474.645" gradientUnits="userSpaceOnUse">
                    <stop class="text-bn-blush-600" stop-color="currentColor" />
                    <stop class="text-bn-strawberry-600" offset="1" stop-color="currentColor" />
                </linearGradient>
            </defs>
        </svg>
    </div>

    <div class="bg-bn-blush-50 sm:bg-transparent relative px-6 lg:px-8 backdrop-blur-3xl">
        <div class="mx-auto max-w-2xl py-16 sm:py-24">
            <div class="grid gap-y-6 text-center text-lg leading-relaxed text-oxford-800">
                <h1 class="text-4xl font-bold tracking-tight text-oxford-900 sm:text-6xl">
                    OpenPrescribing Hospitals
                </h1>
                
                <h2 class="text-xl sm:text-2xl text-oxford-700 font-medium">
                    Explore NHS hospital medicines data across NHS Trusts in England
                </h2>
                
                <p class="text-gray-600 max-w-prose mx-auto">
                    Every month, NHS England publishes processed pharmacy stock control data in the form of the 
                    <a href="https://opendata.nhsbsa.net/dataset/secondary-care-medicines-data-indicative-price" target="_blank" class="text-oxford-600 hover:text-oxford-700 font-semibold">Secondary Care Medicines Dataset (SCMD)</a>.
                    OpenPrescribing Hospitals allows easy exploration of this data 
                    through a set of curated Measures and a custom analysis builder.
                </p>
            </div>
        </div>
    </div>
</div>

<div class="px-6 lg:px-8 mb-16">
    <div class="mx-auto mt-16 max-w-7xl mb-4 px-8 sm:px-12">
        

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
            <div class="group bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 flex flex-col overflow-hidden border border-gray-100 hover:border-oxford-100">
                <div class="flex flex-col h-full p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-oxford-900 group-hover:text-oxford-700 transition-colors">Submission History</h3>
                        <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-oxford-50 group-hover:bg-oxford-100 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-oxford-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                            </svg>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm leading-relaxed flex-grow">View the data submission history for each NHS Trust in England over time and identify gaps in reporting.</p>
                    {% if user.is_authenticated %}
                        <a href="{% url 'viewer:submission_history' %}" 
                           class="inline-flex w-full justify-center items-center px-4 py-2 bg-oxford-50 text-oxford-600 rounded-lg hover:bg-oxford-100 transition-colors duration-200 font-medium mt-6">
                            View History
                        </a>
                    {% endif %}
                </div>
            </div>

            <div class="group bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 flex flex-col overflow-hidden border border-gray-100 hover:border-oxford-100">
                <div class="flex flex-col h-full p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-oxford-900 group-hover:text-oxford-700 transition-colors">Measures</h3>
                        <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-oxford-50 group-hover:bg-oxford-100 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-oxford-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
                            </svg>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm leading-relaxed flex-grow">Explore a curated set of measures that highlight variation in medicines issued across NHS Trusts.</p>
                    {% if user.is_authenticated %}
                        <a href="{% url 'viewer:measures_list' %}" 
                           class="inline-flex w-full justify-center items-center px-4 py-2 bg-oxford-50 text-oxford-600 rounded-lg hover:bg-oxford-100 transition-colors duration-200 font-medium mt-6">
                            View Measures
                        </a>
                    {% endif %}
                </div>
            </div>

            <div class="group bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 flex flex-col overflow-hidden border border-gray-100 hover:border-oxford-100">
                <div class="flex flex-col h-full p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-oxford-900 group-hover:text-oxford-700 transition-colors">Custom Analyses</h3>
                        <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-oxford-50 group-hover:bg-oxford-100 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-oxford-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z" />
                            </svg>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm leading-relaxed flex-grow">Build your own analysis. Explore trends for individual products or groups of related products issued across NHS Trusts.</p>
                    {% if user.is_authenticated %}
                        <a href="{% url 'viewer:analyse' %}" 
                           class="inline-flex w-full justify-center items-center px-4 py-2 bg-oxford-50 text-oxford-600 rounded-lg hover:bg-oxford-100 transition-colors duration-200 font-medium mt-6">
                            Start Analysing
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

{% if not user.is_authenticated %}

    <div class="relative">
        <div class="px-6 lg:px-8">
            <div class="relative mx-auto max-w-3xl pb-16">
                <div class="bg-oxford-50 border-2 border-oxford-200 rounded-xl p-8 shadow-sm">
                    <div class="text-center">
                        <div class="inline-flex items-center gap-2 mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-oxford-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                            </svg>
                            <p class="text-2xl font-bold text-oxford-900">
                                Under Development
                            </p>
                        </div>
                        <p class="text-gray-600 text-lg mb-4">
                            OpenPrescribing Hospitals is currently under development and conducting user testing. If you are interested in accessing the platform, please <a class="font-semibold text-oxford-600 hover:text-oxford-700 underline decoration-1 underline-offset-2" href="{% url 'viewer:contact' %}" target="_blank">contact us</a>.
                        </p>
                        <p class="text-gray-600 text-lg">
                            Follow our <a href="https://www.bennett.ox.ac.uk/blog/series/openprescribing-hospitals/" class="font-semibold text-oxford-600 hover:text-oxford-700 underline decoration-1 underline-offset-2" target="_blank">blog</a> for updates on our progress.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endif %}
{% endblock %}