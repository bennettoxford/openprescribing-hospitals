{% extends "base.html" %}
{% load static %}
{% load django_vite %}

{% block head %}
    {% vite_asset './src/AnalyseBox.svelte' %}
    {% vite_asset './src/TimeSeriesChart.svelte' %}
    {% vite_asset './src/DataTable.svelte' %}
{% endblock %}

{% block content %}
<div class="bg-gray-100 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-12 flex">
        <div class="w-1/4 mr-8">
            <analyse-box></analyse-box>
        </div>
        <div class="w-3/4">
            <div class="mb-8">
                <time-series-chart></time-series-chart>
            </div>
            <div>
                <data-table id="myDataTable"></data-table>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const dataTable = document.getElementById('myDataTable');
        const dummyData = {{ dummy_data|safe }};
        
        // Wait for the custom element to be defined
        customElements.whenDefined('data-table').then(() => {
            dataTable.updateData(dummyData);
        });
    });
</script>
{% endblock %}
